# 项目上下文说明

## 项目概述

这是一个**收音机移动应用**项目，旨在为用户提供免费的广播电台收听服务。项目目前处于初始规划阶段。

### 核心功能

1. **广播收听** - 免费收听本地电台和全国性电台
2. **在线/离线播放** - 支持在线播放和离线下载节目
3. **搜索功能** - 按节目名称、主持人、电台名称搜索
4. **分类浏览** - 按电台类型、地区、语言分类浏览
5. **收藏功能** - 收藏喜欢的节目、电台、主持人
6. **分享功能** - 分享节目给朋友
7. **夜间模式** - 保护眼睛的深色主题
8. **后台播放** - 离开应用后继续播放

### 技术约束

- **无后端服务器** - 所有数据保存在本地
- **跨平台支持** - 需打包为 Android 和 iOS 应用

## 技术栈建议

基于项目需求，推荐以下技术方案：

| 技术领域 | 推荐方案 | 说明 |
|---------|---------|------|
| 跨平台框架 | Flutter / React Native / Compose Multiplatform | 一套代码支持 Android 和 iOS |
| 状态管理 | Provider / Riverpod / Redux | 管理应用状态 |
| 本地存储 | SQLite / SharedPreferences / Hive | 存储用户数据和收藏 |
| 音频播放 | just_audio / expo-av / MediaPlayer | 支持后台播放 |
| 电台数据源 | 公开API或内置电台列表 | 无需自建后端 |

## 项目结构（待创建）

```
shou_yin_ji/
├── lib/                  # 主代码目录
│   ├── main.dart         # 应用入口
│   ├── models/           # 数据模型
│   ├── screens/          # 页面/视图
│   ├── widgets/          # 可复用组件
│   ├── services/         # 业务逻辑/服务
│   ├── utils/            # 工具函数
│   └── constants/        # 常量定义
├── assets/               # 静态资源
│   ├── images/
│   └── audio/
├── test/                 # 测试文件
├── pubspec.yaml          # 依赖配置（Flutter）
└── 需求.md               # 需求文档
```

## 开发指南

### 构建命令（待定）

```bash
# Flutter 项目
flutter pub get          # 安装依赖
flutter run              # 运行调试
flutter build apk        # 构建 Android APK
flutter build ios        # 构建 iOS 应用

# React Native 项目
npm install              # 安装依赖
npx react-native run-android
npx react-native run-ios
```

### 编码规范

- 遵循所选框架的最佳实践
- 使用有意义的变量和函数命名
- 保持代码模块化，职责单一
- 添加必要的注释说明复杂逻辑
- 编写单元测试覆盖核心功能

### 数据持久化方案

由于项目要求无需后端服务器，数据存储策略如下：

| 数据类型 | 存储方式 |
|---------|---------|
| 用户收藏 | SQLite / 本地JSON |
| 播放历史 | SQLite |
| 用户设置 | SharedPreferences |
| 电台列表 | 内置JSON或远程静态资源 |
| 下载节目 | 本地文件系统 |

## 注意事项

1. **权限需求**
   - 网络访问权限（在线播放）
   - 存储权限（离线下载）
   - 后台运行权限（后台播放）

2. **电台数据来源**
   - 需调研可用的免费电台API
   - 或维护一份内置电台列表
   - 考虑使用公开的流媒体地址

3. **音频格式支持**
   - MP3、AAC、M3U8等常见流媒体格式
   - 需处理网络异常和缓冲

## 文件索引

| 文件 | 说明 |
|-----|------|
| `需求.md` | 项目需求文档，包含全部功能要求 |

---

*本文档将随项目进展持续更新*
